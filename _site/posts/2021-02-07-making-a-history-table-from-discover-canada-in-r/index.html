<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Umair Durrani: Making a History Table of Discover Canada in R</title>

<meta property="description" itemprop="description" content="Manipulating text with {quanteda} and creating a table with {reactable}"/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-02-07"/>
<meta property="article:created" itemprop="dateCreated" content="2021-02-07"/>
<meta name="article:author" content="Umair Durrani"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Umair Durrani: Making a History Table of Discover Canada in R"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Manipulating text with {quanteda} and creating a table with {reactable}"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Umair Durrani"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Umair Durrani: Making a History Table of Discover Canada in R"/>
<meta property="twitter:description" content="Manipulating text with {quanteda} and creating a table with {reactable}"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","preview","output","date"]}},"value":[{"type":"character","attributes":{},"value":["Making a History Table of Discover Canada in R"]},{"type":"character","attributes":{},"value":["Manipulating text with {quanteda} and creating a table with {reactable}"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Umair Durrani"]}]}]},{"type":"character","attributes":{},"value":["https://media.giphy.com/media/3FmmhJdHN4PSESllzZ/giphy.gif"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["02-07-2021"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["dc_pg13.PNG","discover-large.pdf","making-a-history-table-from-discover-canada-in-r_files/anchor-4.2.2/anchor.min.js","making-a-history-table-from-discover-canada-in-r_files/bowser-1.9.3/bowser.min.js","making-a-history-table-from-discover-canada-in-r_files/core-js-2.5.3/LICENSE","making-a-history-table-from-discover-canada-in-r_files/core-js-2.5.3/package.json","making-a-history-table-from-discover-canada-in-r_files/core-js-2.5.3/shim.min.js","making-a-history-table-from-discover-canada-in-r_files/distill-2.2.21/template.v2.js","making-a-history-table-from-discover-canada-in-r_files/figure-html5/unnamed-chunk-6-1.png","making-a-history-table-from-discover-canada-in-r_files/header-attrs-2.6.6/header-attrs.js","making-a-history-table-from-discover-canada-in-r_files/htmlwidgets-1.5.3/htmlwidgets.js","making-a-history-table-from-discover-canada-in-r_files/jquery-1.11.3/jquery.min.js","making-a-history-table-from-discover-canada-in-r_files/popper-2.6.0/popper.min.js","making-a-history-table-from-discover-canada-in-r_files/react-16.12.0/AUTHORS","making-a-history-table-from-discover-canada-in-r_files/react-16.12.0/LICENSE.txt","making-a-history-table-from-discover-canada-in-r_files/react-16.12.0/react-dom.min.js","making-a-history-table-from-discover-canada-in-r_files/react-16.12.0/react.min.js","making-a-history-table-from-discover-canada-in-r_files/reactable-binding-0.2.3/reactable.js","making-a-history-table-from-discover-canada-in-r_files/reactwidget-1.0.0/react-tools.js","making-a-history-table-from-discover-canada-in-r_files/reactwidget-1.0.0/react-tools.js.map","making-a-history-table-from-discover-canada-in-r_files/tippy-6.2.7/tippy-bundle.umd.min.js","making-a-history-table-from-discover-canada-in-r_files/tippy-6.2.7/tippy-light-border.css","making-a-history-table-from-discover-canada-in-r_files/tippy-6.2.7/tippy.css","making-a-history-table-from-discover-canada-in-r_files/tippy-6.2.7/tippy.umd.min.js","making-a-history-table-from-discover-canada-in-r_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */

@import url('https://fonts.googleapis.com/css2?family=Fira+Code');
@import url('https://fonts.googleapis.com/css2?family=Raleway&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    "Raleway", sans-serif;
  --mono-font:       "Fira Code", monospace;
  --body-font:       "Open Sans", sans-serif;
  --navbar-font:     "Raleway", sans-serif;  /* websites + blogs only */

}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #391509;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

body {
  background-color: #eadbcb;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.6.6/header-attrs.js"></script>
  <script src="../../site_libs/core-js-2.5.3/shim.min.js"></script>
  <script src="../../site_libs/react-16.12.0/react.min.js"></script>
  <script src="../../site_libs/react-16.12.0/react-dom.min.js"></script>
  <script src="../../site_libs/reactwidget-1.0.0/react-tools.js"></script>
  <script src="../../site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
  <script src="../../site_libs/reactable-binding-0.2.3/reactable.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Making a History Table of Discover Canada in R","description":"Manipulating text with {quanteda} and creating a table with {reactable}","authors":[{"author":"Umair Durrani","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-02-07T00:00:00.000-05:00","citationText":"Durrani, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Umair Durrani</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">About</a>
<a href="../../Blog.html">Blog</a>
<a href="https://rgems.netlify.app/">R Gems</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Tutorials
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://umair.shinyapps.io/segmented_app_doc/">Segmented</a>
<a href="https://umair.shinyapps.io/R_for_driving_sim/">R for Driving Sim</a>
<a href="https://rpubs.com/durraniu/on_dashboard">Ontario Weather Dashboard</a>
<a href="https://rpubs.com/durraniu/datavizr">Short Intro. to Data Science</a>
<a href="https://github.com/durraniu/ggplot2_for_beginners/blob/master/Using_ggplot2.Rmd">Short Intro. to ggplot2</a>
<a href="https://rpubs.com/durraniu/interactive_plots">Interactive Plotting in R</a>
<a href="https://rpubs.com/durraniu/sovg">Histogram y axis</a>
<a href="https://rpubs.com/durraniu/DTQR">Decision Tree Example</a>
<a href="https://durraniu.github.io/BBC100/">BBC 100 Women</a>
<a href="https://rpubs.com/durraniu/HT1">Hypothesis Test for Population Mean</a>
</div>
</div>
<a href="https://github.com/durraniu">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="https://twitter.com/umairdurrani87">
<i class="fab fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://www.linkedin.com/in/durraniu/">
<i class="fab fa-linkedin" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Making a History Table of Discover Canada in R</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Manipulating text with {quanteda} and creating a table with {reactable}</p></p>
</div>

<div class="d-byline">
  
  Umair Durrani
  
<br/>02-07-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#can-i-use-r-to-create-a-history-timeline">Can I use R to create a history timeline?</a></li>
<li><a href="#step-1-from-pdf-to-dataframe">Step 1: From pdf to dataframe</a></li>
<li><a href="#step-2-split-the-text-paragraph-in-each-row-into-sentences">Step 2: Split the text paragraph in each row into sentences</a></li>
<li><a href="#step-3-find-the-sentences-containing-years">Step 3: Find the sentences containing years</a></li>
<li><a href="#step-4-create-a-table-of-year-and-relevant-history">Step 4: Create a table of year and relevant history:</a></li>
</ul>
</nav>
</div>
<p><a href="https://www.canada.ca/en/immigration-refugees-citizenship/corporate/publications-manuals/discover-canada.html">Discover Canada</a> is a study guide that is a required read for anyone preparing for the Canadian citizenship test. It contains information on Canadian government, culture and geography.</p>
<p>There is also a lot of history sprinkled throughout the text, containing the exact year when something important happened. For example, the current border between Canada and The United States of America was partly a result of the 1812 war between the two countries.</p>
<p><img src="https://media.giphy.com/media/FejKb3bDS5c9a/giphy.gif" width="163" /></p>
<h2 id="can-i-use-r-to-create-a-history-timeline">Can I use R to create a history timeline?</h2>
<p>As a new reader, trying to remember all of the Canadian histoy seems very daunting. I personally prefer a timeline with year and <code>what happened</code> information. So, I initially thought to create something like that by hand, but then:</p>
<ul>
<li>I recalled that <em>Discover Canada</em> is also available as a pdf and I could potentially import it in <code>R</code> as text</li>
<li>I had heard the term <em>corpus</em> used for text documents in <code>R</code>, and thought that I could maybe convert the imported text into a corpus. A recent <a href="https://www.youtube.com/watch?v=NYuTFy_JRLA">R Ladies webinar</a> showed exactly how (Thank you R-Ladies Tunis!)</li>
<li>With text in <code>R</code>, I could use the <code>tidytext</code> package to extract the sentences and then get the history by years</li>
<li>Finally, I could create a table with history in each year in increasing order using <code>reactable</code> package. My starting point here was <a href="https://themockup.blog/posts/2020-05-13-reactable-tables-the-rest-of-the-owl/">Tom Mocks blog</a> (thanks Tom!)</li>
</ul>
<h2 id="step-1-from-pdf-to-dataframe">Step 1: From pdf to dataframe</h2>
<p>I started by loading the <code>pdftools</code> and <code>quanteda</code> libraries for reading the <em>Discover Canada</em> pdf file and converting it into a corpus.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/pdftools'>pdftools</a></span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://quanteda.io'>quanteda</a></span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<p>I first downloaded the large print pdf file from the <a href="https://www.canada.ca/en/immigration-refugees-citizenship/corporate/publications-manuals/discover-canada.html">Discover Canada website</a>. Following shows the page 13 from the pdf:</p>
<figure>
<img src="dc_pg13.PNG" width="125" alt="Page 13 from the Large Print pdf of Discover Canada" /><figcaption aria-hidden="true">Page 13 from the Large Print pdf of Discover Canada</figcaption>
</figure>
<p>Next, I read this file in <code>R</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pdf_text</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/pdftools/reference/pdftools.html'>pdf_text</a></span><span class='op'>(</span>pdf <span class='op'>=</span> <span class='st'>"discover-large.pdf"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>pdf_text</span>, <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;             STUDY GUIDE\r\n           Discover Canada\r\nThe Rights and Responsibilities of Citizenship\r\n          LARGE PRINT\r\n&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
[2] &quot;     2\r\n\t\r \r\n&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
[3] &quot;The Oath of Citizenship\r\nI swear (or affirm)\r\nThat I will be faithful\r\nAnd bear true allegiance\r\nTo Her Majesty Queen Elizabeth the Second\r\nQueen of Canada\r\nHer Heirs and Successors\r\nAnd that I will faithfully observe\r\nThe laws of Canada\r\nAnd fulfil my duties as a Canadian citizen.\r\nLe serment de citoyennet\r\nJe jure (ou jaffirme solennellement)\r\nQue je serai fidle\r\nEt porterai sincre allgeance\r\n Sa Majest la Reine Elizabeth Deux\r\nReine du Canada\r\n ses hritiers et successeurs\r\nQue jobserverai fidlement les lois du Canada\r\nEt que je remplirai loyalement mes obligations\r\nde citoyen canadien.\r\n                                   3\r\n\t\r \r\n&quot; </code></pre>
</div>
<p>The next step was to convert the raw text into a corpus. This is possible with the <code>corpus()</code> function from the <code>quanteda</code> package:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dc_corpus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/corpus.html'>corpus</a></span><span class='op'>(</span><span class='va'>pdf_text</span><span class='op'>)</span>

<span class='fu'><a href='https://quanteda.io/reference/docvars.html'>docvars</a></span><span class='op'>(</span><span class='va'>dc_corpus</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>data frame with 0 columns and 129 rows</code></pre>
</div>
<p>The <code>quanteda::docvars()</code> function lets you find the existing variables and create new variables for the documents in a corpus. There were 129 text documents in <code>dc_corpus</code> (you can find it with <code>length(dc_corpus)</code>). We know that there is only 1 document that I am using here, but the <code>pdftools::pdftext()</code> function split the original text into 129 parts. Thats why the corpus now has 129 documents.</p>
<h3 id="interlude-tokenization-and-visualization-of-text-data">Interlude: Tokenization and Visualization of Text Data</h3>
<p>Now that the data is living in a corpus, there is a lot that I can do in terms of text analysis. For instance, <a href="https://nlp-bergen.netlify.app/">this awesome post</a> by the R-Ladies presenter, <a href="https://twitter.com/cosima_meyer">Cosima Meyer</a> introduces the terms for natural language processing and also shows how to clean and visualize text data. Based on that code, I produced a word cloud in three steps below, all powered by the <code>quanteda</code> package:</p>
<ul>
<li>Pre-process the text by removing punctuation, symbols and URL, and splitting the hyphenated words. This pre-processed result is called as tokens.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Text pre-processing</span>
<span class='va'>dc_tokens</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/tokens.html'>tokens</a></span><span class='op'>(</span>
    <span class='co'># Takes the corpus</span>
    <span class='va'>dc_corpus</span>,
    <span class='co'># Remove punctuation</span>
    remove_punct <span class='op'>=</span> <span class='cn'>TRUE</span>,
    <span class='co'># Remove symbols</span>
    remove_symbols <span class='op'>=</span> <span class='cn'>TRUE</span>,
    <span class='co'># Remove URL</span>
    remove_url <span class='op'>=</span> <span class='cn'>TRUE</span>,
    <span class='co'># Split up hyphenated words</span>
    split_hyphens <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>


<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dc_tokens</span>, <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tokens consisting of 3 documents.
text1 :
 [1] &quot;STUDY&quot;            &quot;GUIDE&quot;            &quot;Discover&quot;        
 [4] &quot;Canada&quot;           &quot;The&quot;              &quot;Rights&quot;          
 [7] &quot;and&quot;              &quot;Responsibilities&quot; &quot;of&quot;              
[10] &quot;Citizenship&quot;      &quot;LARGE&quot;            &quot;PRINT&quot;           

text2 :
[1] &quot;2&quot;

text3 :
 [1] &quot;The&quot;         &quot;Oath&quot;        &quot;of&quot;          &quot;Citizenship&quot;
 [5] &quot;I&quot;           &quot;swear&quot;       &quot;or&quot;          &quot;affirm&quot;     
 [9] &quot;That&quot;        &quot;I&quot;           &quot;will&quot;        &quot;be&quot;         
[ ... and 87 more ]</code></pre>
</div>
<ul>
<li>Create a document-feature matrix (DFM). DFM estimates the frequency of each word (feature) across all the text components (documents). While creating DFM you can also <em>stem</em> words. Stemming refers to finding the common root of several words. For example, <em>government</em> and <em>governor</em> have the same root <strong>govern</strong>. Moreover, you can remove the <em>stopwords</em> that are common words in the language e.g.<em>the</em>, <em>are</em>, etc.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Calculate a document-feature matrix (DFM)</span>

<span class='va'>dc_dfm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/dfm.html'>dfm</a></span><span class='op'>(</span>
  <span class='co'># Take the token object</span>
  <span class='va'>dc_tokens</span>,
  <span class='co'># Lower the words</span>
  tolower <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='co'># Get the stem of the words</span>
  stem <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='co'># Remove stop words</span>
  remove <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/stopwords/man/stopwords.html'>stopwords</a></span><span class='op'>(</span><span class='st'>"english"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>dc_dfm</span>
</code></pre>
</div>
<pre><code>Document-feature matrix of: 129 documents, 3,008 features (97.7% sparse).
       features
docs    studi guid discov canada right respons citizenship larg print
  text1     1    1      1      1     1       1           1    1     1
  text2     0    0      0      0     0       0           0    0     0
  text3     0    0      0      4     0       0           1    0     0
  text4     0    0      0      5     1       0           1    0     0
  text5     0    0      0      5     2       2           4    0     0
  text6     0    1      0      2     2       1           1    0     0
       features
docs    2
  text1 0
  text2 1
  text3 0
  text4 0
  text5 0
  text6 0
[ reached max_ndoc ... 123 more documents, reached max_nfeat ... 2,998 more features ]</code></pre>
</div>
<ul>
<li>Create a wordcloud:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/karthik/wesanderson'>wesanderson</a></span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://quanteda.io/reference/textplot_wordcloud.html'>textplot_wordcloud</a></span><span class='op'>(</span>
  <span class='co'># Load the DFM object</span>
  <span class='va'>dc_dfm</span>,
  <span class='co'># Define the minimum number the words have to occur</span>
  min_count <span class='op'>=</span> <span class='fl'>3</span>,
  <span class='co'># Define the maximum number the words can occur</span>
  max_words <span class='op'>=</span> <span class='fl'>500</span>,
  <span class='co'># Define a color</span>
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/wesanderson/man/wes_palette.html'>wes_palette</a></span><span class='op'>(</span><span class='st'>"Royal1"</span><span class='op'>)</span>
  
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="making-a-history-table-from-discover-canada-in-r_files/figure-html5/unnamed-chunk-6-1.png" width="624" /></p>
</div>
<p>As expected, <strong>canada</strong> was the most common word across all the paragraphs of text.</p>
<p>Going back to our task of creating a dataframe out of the corpus, the following code shows how to do that (thanks to this <a href="https://stackoverflow.com/a/33193705/2829961">answer on stackoverflow</a>):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Corpus to dataframe</span>
<span class='va'>dc_df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>text <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>dc_corpus</span>, <span class='va'>as.character</span><span class='op'>)</span>, 
           stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span>, row.names <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
         <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dc_df</span>, <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 1
  text                                                                
  &lt;chr&gt;                                                               
1 &quot;             STUDY GUIDE\n           Discover Canada\nThe Rights a~
2 &quot;     2\n\t\n \n&quot;                                                  
3 &quot;The Oath of Citizenship\nI swear (or affirm)\nThat I will be faith~</code></pre>
</div>
<h2 id="step-2-split-the-text-paragraph-in-each-row-into-sentences">Step 2: Split the text paragraph in each row into sentences</h2>
<p>I used the <code>tidytext</code> package for this step:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/juliasilge/tidytext'>tidytext</a></span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>## divide into sentences</span>
<span class='va'>dc_df_sent</span> <span class='op'>&lt;-</span> <span class='va'>dc_df</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/unnest_tokens.html'>unnest_tokens</a></span><span class='op'>(</span>output <span class='op'>=</span> <span class='va'>sentence</span>, input <span class='op'>=</span> <span class='va'>text</span>, token <span class='op'>=</span> <span class='st'>"sentences"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dc_df_sent</span>, <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 1
  sentence                                                            
  &lt;chr&gt;                                                               
1 study guide            discover canada the rights and responsibilit~
2 2                                                                   
3 the oath of citizenship i swear (or affirm) that i will be faithful~</code></pre>
</div>
<h2 id="step-3-find-the-sentences-containing-years">Step 3: Find the sentences containing years</h2>
<p>I found all those sentences that contained a four-digit number that indicated a year in the text. Then I filtered out all other sentences and sorted the dataframe by year:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>## Find which sentence has a 4 digit number</span>
<span class='va'>dc_df_year</span> <span class='op'>&lt;-</span> <span class='va'>dc_df_sent</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    has_a_num <span class='op'>=</span> <span class='fu'>str_detect</span><span class='op'>(</span>string <span class='op'>=</span> <span class='va'>sentence</span>, pattern <span class='op'>=</span> <span class='st'>"[[:digit:]]{4}"</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>has_a_num</span> <span class='op'>==</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>
    year <span class='op'>=</span> <span class='fu'>str_extract</span><span class='op'>(</span>string <span class='op'>=</span> <span class='va'>sentence</span>, pattern <span class='op'>=</span> <span class='st'>"[[:digit:]]{4}"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>sentence</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span> 


<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dc_df_year</span>, <span class='fl'>2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
   year sentence                                                      
  &lt;dbl&gt; &lt;chr&gt;                                                         
1  1215 together, these secure for canadians an 800-year old traditio~
2  1497 picture: (top) indian encampment, fur trade era picture: (rig~</code></pre>
</div>
<h2 id="step-4-create-a-table-of-year-and-relevant-history">Step 4: Create a table of year and relevant history:</h2>
<p>Finally, I used the <code>reactable</code> package to create an interactive table that contained <code>year</code> as a group. Clicking on a year group reveals history in one or more sentences from Discover Canada:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://glin.github.io/reactable/'>reactable</a></span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://glin.github.io/reactable/reference/reactable.html'>reactable</a></span><span class='op'>(</span>
  <span class='va'>dc_df_year</span>,
  groupBy <span class='op'>=</span> <span class='st'>"year"</span>,
  searchable <span class='op'>=</span> <span class='cn'>TRUE</span>,
  filterable <span class='op'>=</span> <span class='cn'>TRUE</span>,
  resizable <span class='op'>=</span> <span class='cn'>TRUE</span>,
  onClick <span class='op'>=</span> <span class='st'>"expand"</span>,
  showPageSizeOptions <span class='op'>=</span> <span class='cn'>TRUE</span>,
  columns <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    year <span class='op'>=</span> <span class='fu'><a href='https://glin.github.io/reactable/reference/colDef.html'>colDef</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"Year"</span>, maxWidth <span class='op'>=</span> <span class='fl'>250</span><span class='op'>)</span>,
    sentence <span class='op'>=</span> <span class='fu'><a href='https://glin.github.io/reactable/reference/colDef.html'>colDef</a></span><span class='op'>(</span> name <span class='op'>=</span> <span class='st'>"What happened?"</span><span class='op'>)</span>
   <span class='op'>)</span>,
  theme <span class='op'>=</span> <span class='fu'><a href='https://glin.github.io/reactable/reference/reactableTheme.html'>reactableTheme</a></span><span class='op'>(</span>backgroundColor <span class='op'>=</span> <span class='st'>"#eadbcb"</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-b1d25f6e9fb6e31b6fce" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b1d25f6e9fb6e31b6fce">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"year":[1215,1497,1497,1534,1550,1576,1600,1600,1600,1604,1604,1608,1610,1670,1690,1700,1700,1700,1701,1755,1758,1759,1763,1773,1774,1775,1776,1780,1791,1792,1793,1793,1798,1800,1800,1800,1807,1812,1812,1812,1812,1812,1813,1813,1813,1813,1814,1814,1814,1815,1815,1832,1834,1837,1840,1842,1847,1848,1849,1850,1853,1854,1857,1857,1860,1863,1864,1867,1867,1867,1867,1867,1867,1867,1869,1870,1871,1873,1876,1880,1885,1885,1885,1886,1890,1891,1892,1895,1898,1899,1900,1900,1909,1914,1914,1914,1915,1916,1916,1916,1917,1917,1917,1917,1918,1918,1918,1918,1920,1920,1921,1921,1921,1923,1927,1927,1928,1929,1933,1934,1935,1937,1939,1940,1940,1941,1943,1943,1944,1944,1944,1944,1945,1945,1945,1947,1948,1948,1950,1950,1951,1952,1956,1957,1957,1960,1960,1960,1963,1965,1965,1967,1969,1969,1970,1970,1970,1972,1973,1975,1978,1979,1980,1980,1980,1982,1982,1982,1982,1985,1986,1988,1988,1989,1994,1995,1996,1999,2002,2005,2005,2006,2006,2007,2008,2010,2011,2100,6232,6868],"sentence":["together, these secure for canadians an 800-year old tradition of ordered liberty, which dates back to the signing of magna carta in 1215 in england (also known as the great charter of freedoms), including:       freedom of conscience and religion;       freedom of thought, belief, opinion and expression,        including freedom of speech and of the press;       freedom of peaceful assembly; and       freedom of association.","picture: (top) indian encampment, fur trade era picture: (right) john cabot, an italian immigrant to england, was the first to map canadas atlantic shore, setting foot on newfoundland or cape breton island in 1497 and claiming the new founde land for england.","european exploration began in earnest in 1497 with the expedition of john cabot, who was the first to draw a map of canadas east coast.","exploring a river, naming canada between 1534 and 1542, jacques cartier made three voyages across the atlantic, claiming the land for king francis i of france.","by the 1550s, the name of canada began appearing on maps.","the capital is iqaluit, formerly frobisher bay, named after the english explorer martin frobisher, who penetrated the uncharted arctic for queen elizabeth i in 1576.","most are descendants of 8,500 french settlers from the 1600s and 1700s and maintain a unique identity, culture and language.","the basic way of life in english-speaking areas was established by hundreds of thousands of english, welsh, scottish and irish settlers, soldiers and migrants from the 1600s to the 20th century.","english colonies along the atlantic seaboard, dating from the early 1600s, eventually became richer and more populous than new france.","the acadians are the descendants of french colonists who began settling in what are now the maritime provinces in 1604.","lawrence river and to set eyes on present-day qubec city and montreal royal new france in 1604, the first european settlement north of florida was established by french explorers pierre de monts and samuel de champlain, first on st.","in 1608 champlain built a fortress at what is now qubec city.","english settlement did not begin until 1610                                  23","struggle for a continent in 1670, king charles ii of england granted the hudsons bay company exclusive trading rights over the watershed draining into hudson bay.","picture: (from left to right) count frontenac refused to surrender quebec to the english in 1690, saying: my only reply will be from the mouths of my cannons!","in the 1700s france and great britain battled for control of north america.","the first movement to abolish the transatlantic slave trade emerged in the british parliament in the late 1700s.","maple leaves were adopted as a symbol by french-canadians in the 1700s, have appeared on canadian uniforms and insignia since the 1850s, and are carved into the headstones of our fallen soldiers buried overseas and in canada.","the french and the iroquois made peace in 1701.","between 1755 and 1763, during the war between britain and france, more than two-thirds of the acadians were deported from their homeland.","the first representative assembly was elected in halifax, nova scotia, in 1758.","in 1759, the british defeated the french in the battle of the plains of abraham at qubec city  marking the end of frances empire in america.","territorial rights were first guaranteed through the royal proclamation of 1763 by king george iii, and established the basis for negotiating treaties with the newcomers treaties that were not always fully respected.","prince edward island followed in 1773, new brunswick in 1785.","a tradition of accomodation to better govern the french roman catholic majority, the british parliament passed the quebec act of 1774.","sir guy carleton (lord dorchester), as governor of quebec, defended the rights of the canadiens, defeated an american military invasion of quebec in 1775, and supervised the loyalist migration to nova scotia and quebec in 1782-83.","united empire loyalists in 1776, the 13 british colonies to the south of quebec declared independence and formed the united states.","picture: olympian marjorie turner-bailey of nova scotia is a descendant of black loyalists, escaped slaves and freed men and women of african origin who in the 1780s fled to canada from america, where slavery remained legal until 1863                                  22","the constitutional act of 1791 divided the province of quebec into upper canada (later ontario), which was mainly loyalist, protestant and english-speaking, and lower canada (later quebec), heavily catholic and french- speaking.","in turn, in 1792, some black nova scotians, who were                                  26","picture: the first elected assembly of lower canada, in qu bec city, debates whether to use both french and english, january 21, 1793 abolition of slavery slavery has existed all over the world, from asia, africa and the middle east to the americas.","in 1793, upper canada, led by lieutenant governor john graves simcoe, a loyalist military officer, became the first province in the empire to move toward abolition.","it is named in honour of sir william logan, a world-famous geologist, born in montreal in 1798 to scottish immigrant parents.","from the 1800s until the 1980s, the federal government placed many aboriginal children in residential schools to educate and assimilate them into mainstream canadian culture.","diversity in canada the majority of canadians were born in this country and this has been true since the 1800s.","ice hockey was developed in canada in the 1800s.","in 1807, the british parliament prohibited the buying and selling of slaves, and in 1833 abolished slavery throughout the empire.","the war of 1812: the fight for canada after the defeat of napoleon bonapartes fleet in the battle of trafalgar (1805), the royal navy ruled the waves.","believing it would be easy to conquer canada, the united states launched an invasion in june 1812.","together, british troops, first nations and canadian volunteers defeated an american invasion in 181214.","the present-day canada-u.s.a. border is partly an outcome of the war of 1812, which ensured that canada would remain independent of the united states.","she is recognized as a heroine to this day picture: french-canadian militiamen helped defend canada in the war of 1812 rebellions of 183738 in the 1830s, reformers in upper and lower canada believed that progress toward full democracy was too slow.","in 1813, lieutenant-colonel charles de salaberry and 460 soldiers, mostly french canadiens, turned                                   29","in 1813 the americans burned government house and the parliament buildings in york (now toronto).","picture: (from left to right) hms shannon, a royal navy frigate, leads the captured uss chesapeake into halifax harbour, 1813.","picture: in 1813, laura secord, pioneer wife and mother of five children, made a dangerous 19-mile (30-km) journey on foot to warn lieutenant james fitzgibbon of a planned american attack.","in retaliation in 1814, major-general robert ross led an expedition from nova scotia that burned down the white house and other public buildings in washington, d.c.","by 1814, the american attempt to conquer canada had failed.","picture: the duke of wellington sent some of his best soldiers to defend canada in 1814.","wellington, who defeated napoleon in 1815, therefore played a direct role in founding the national capital                                  30","born in scotland on january 11, 1815, he came to upper canada as a child.","the montreal stock exchange opened in 1832.","jean baptiste society, a french-canadian patriotic association, in 1834, and was also adopted by other groups.","when armed rebellions occurred in 183738 in the area outside montreal and in toronto, the rebels did not have enough public support to succeed.","responsible government in 1840, upper and lower canada were united as the province of canada.","logan founded and directed the geological survey of canada from 1842 to 1869 and is considered one of canadas greatest scientists northwest territories the northwest territories (n.w.t.) were originally made up in 1870 from ruperts land and the north-western territory.","the first british north american colony to attain full responsible government was nova scotia in 184748.","in 184849 the governor of united canada, lord elgin, with encouragement from london, introduced responsible government.","picture: sir louis-hippolyte la fontaine, a champion of french language rights, became the first head of a responsible government (similar to a prime minister) in canada in 1849                                  32","canadas soldiers began using the maple leaf in the 1850s.","in 1853 she became the first woman publisher in canada, helping to found and edit the provincial freeman, a weekly newspaper dedicated to anti-slavery, black immigration to canada, temperance (urging people to drink less alcohol) and upholding british rule.","the v.c. has been awarded to 96 canadians since 1854, including:       then lieutenant alexander roberts dunn, born in present-        day toronto, served in the british army in the charge of        the light brigade at balaclava (1854) in the crimean war,        and was the first canadian to be awarded the victoria        cross."," able seaman william hall of horton, nova scotia, whose        parents were american slaves, was the first black man to        be awarded the v.c. for his role in the siege of lucknow        during the indian rebellion of 1857.","the national capital ottawa, located on the ottawa river, was chosen as the capital in 1857 by queen victoria, the great-great-grandmother of queen elizabeth ii.","the buildings were completed in the 1860s.","picture: (from left to right) fort garry, 1863: the flag of the hudsons bay company flew over western canada for 200 years before confederation.","confederation from 1864 to 1867, representatives of nova scotia, new brunswick and the province of canada, with british support, worked together to establish a new country.","our institutions uphold a commitment to peace, order, and good government, a key phrase in canadas original constitutional document in 1867, the british north america act.","the british parliament passed the british north america act in 1867.","the dominion of canada was officially born on july 1, 1867.","picture: the fathers of confederation established the dominion of canada on july 1, 1867, the birth of the country that we know today dominion from sea to sea sir leonard tilley, an elected official and father of confederation from new brunswick, suggested the term dominion of canada in 1864.","canadas first prime minister in 1867, sir john alexander macdonald, a father of confederation, became canadas first prime minister.","the responsibilities of the federal and provincial governments were defined in 1867 in the british north america act, now known as the constitution act, 1867.","canada has been a constitutional monarchy in its own right since confederation in 1867 during queen victorias reign.","challenge in the west when canada took over the vast northwest region from the hudsons bay company in 1869, the 12,000 mtis of the red river were not consulted.","ottawa sent soldiers to retake fort garry in 1870.","a railway from sea to sea british columbia joined canada in 1871 after ottawa promised to build a railway to the west coast.","after the first mtis uprising, prime minister macdonald established the north west mounted police (nwmp) in 1873 to pacify the west and assist in negotiations with the indians.","the red-white-red pattern comes from the flag of the royal military college, kingston, founded in 1876.","it was first sung in qubec city in 1880.","later, as mtis and indian rights were again threatened by westward settlement, a second rebellion in 1885 in present- day saskatchewan led to riels trial and execution for high treason, a decision that was strongly opposed in quebec.","on november 7, 1885, a powerful symbol of unity was completed when donald smith (lord strathcona), the scottish-born director of the canadian pacific railway (cpr), drove the last spike.","alberta has five national parks, including banff national park, established in 1885.","picture: members of the train crew pose with a westbound pacific express, at the first crossing of the illecillewaet river near glacier, b.c., 1886 picture: chinese workers camp on the cpr, kamloops, b.c., 1886 moving westward canadas economy grew and became more industrialized during the economic boom of the 1890s and early 1900s.","yukon thousands of miners came to the yukon during the gold rush of the 1890s, as celebrated in the poetry of robert w.","basketball was invented by canadian james naismith in 1891.","the national hockey league plays for the championship stanley cup, donated by lord stanley, the governor general, in 1892.","the name of my territorial representative is municipal government the name of the municipality where i live is the name of the head of the municipal government (mayor or reeve) is picture: quebec city hall, constructed 1895-96                                74","1898  yukon territory 1905  alberta, saskatchewan 1949  newfoundland and labrador 1999  nunavut                                 34","over 7,000 volunteered to fight in the south african war (18991902), popularly known as the boer war, and over 260 died.","in 1900, canadians took part in the battles of paardeberg (horse mountain) and lillefontein, victories that strengthened national pride in canada.","the white pass and yukon railway opened from skagway in neighbouring alaska to the territorial capital, whitehorse in 1900 and provides a spectacular tourist excursion across precipitous passes and bridges.","professional teams in the canadian football league (cfl) compete for the championship grey cup, donated by lord grey, the governor general, in 1909.","poles and tens of thousands from germany, france, norway and sweden to settle in the west before 1914 and develop a thriving agricultural sector.","when germany attacked belgium and france in 1914 and britain declared war, ottawa formed the canadian expeditionary force (later the canadian corps).","regrettably, from 1914 to 1920, ottawa interned over 8,000 former austro-hungarian subjects, mainly ukrainian men, as enemy aliens in 24 labour camps across canada, even though britain advised against the policy.","canadian medical officer lieutenant colonel john mccrae composed the poem in flanders fields in 1915; it is often recited on remembrance day: in flanders fields the poppies blow between the crosses, row on row, that mark our place; and in the sky the larks, still bravely singing, fly scarce heard amid the guns below.","picture: (from left to right) sergeant, fort garry horse, canadian expeditionary force, 1916.","in 1916, manitoba became the first province to grant voting rights to women.","the centre block was destroyed by an accidental fire in 1916 and rebuilt in 1922.","the canadian corps captured vimy ridge in april 1917, with 10,000 killed or wounded, securing the canadians reputation for valour as the shock troops of the british empire.","picture: (from top to bottom) the vimy memorial in france honours those who served and died in the battle of vimy ridge on april 9, 1917, the first british victory of the first world war.","in 1917, thanks to the leadership of women such as dr."," corporal filip konowal, born in ukraine, showed        exceptional courage in the battle of hill 70 in 1917, and        became the first member of the canadian corps not born        in the british empire to be awarded the v.c.","in 1918, under the command of general sir arthur currie, canadas greatest soldier, the canadian corps advanced alongside the french and british empire troops in the last hundred days.","these included the victorious battle of amiens on august 8, 1918which the germans called the black day of the german armyfollowed by arras, canal du nord, cambrai and mons.","with germany and austrias surrender, the war ended in the armistice on november 11, 1918.","in 1918, most canadian female citizens aged 21 and over were granted the right to vote in federal elections.","in the 1920s, some believed that the british west indies (british territories in the caribbean sea) should become part of canada.","in the visual arts, canada is historically perhaps best known for the group of seven, founded in 1920, who developed a style of painting to capture the rugged wilderness landscapes.","agnes macphail, a farmer and teacher, became the first woman mp in 1921.","in 1921 agnes macphail, a farmer and teacher, became the first woman mp.","red and white had been colours of france and england since the middle ages and the national colours of canada since 1921.","picture: dominion of canada $1 bill, 1923, showing king george v, who assigned canadas national colours (white and red) in 1921, the colours of our national flag today expansion of the dominion 1867  ontario, quebec, nova scotia, new brunswick 1870  manitoba, northwest territories 1871  british columbia 1873  prince edward island 1880  transfer of the arctic islands (to n.w.t.)","old age security was devised as early as 1927, and the canada and quebec pension plans in 1965.","the peace tower was completed in 1927 in memory of the first world war.","born in british guiana, he won bronze medals for canada in the 1928, 1932 and 1936 olympics, then graduated from mcgill university medical school.","the stock market crash of 1929, however, led to the great depression or the dirty thirties.","unemployment reached 27% in 1933 and many businesses were wiped out.","the bank of canada, a central bank to manage the money supply and bring stability to the financial system, was created in 1934.","unity in diversity john buchan, the 1st baron tweedsmuir, was a popular governor general of canada (1935-40).","(canadian club of halifax, 1937).","immigration dropped and many refugees were turned away, including jews trying to flee nazi germany in 1939.","due to the work of thrse casgrain and others, quebec granted women the vote in 1940.","unemployment insurance (now called employment insurance) was introduced by the federal government in 1940.","the canadians fought bravely and suffered losses in the unsuccessful defence of hong kong (1941) from attack by imperial japan, and in a failed raid on nazi-controlled dieppe on the coast of france (1942).","canadians took part in the liberation of italy in 194344."," captain paul triquet of cabano, quebec, earned the v.c.        leading his men and a handful of tanks in the attack on        casa berardi in italy in 1943 during the second world        war, and was later a brigadier.","the d-day invasion, june 6, 1944 in order to defeat nazism and fascism, the allies invaded nazi-occupied europe.","in the epic invasion of normandy in northern france on june 6, 1944, known as d-day, 15,000 canadian troops stormed and captured juno beach from the german army, a great national achievement shown in this painting by orville fisher.","the canadian army liberated the netherlands in 194445 and helped force the german surrender of may 8, 1945, bringing to an end six years of war in europe.","picture: in the second world war, the canadians captured juno beach as part of the allied invasion of normandy on d- day, june 6, 1944 the second world war the second world war began in 1939 when adolf hitler, the national socialist (nazi) dictator of germany, invaded poland and conquered much of europe.","japan surrendered on august 14, 1945the end of four years of war in the pacific.","between 1945 and 1970, as canada drew closer to the united states and other trading partners, the country enjoyed one of the strongest economies among industrialized nations."," lieutenant robert hampton gray, a navy pilot born in        trail, b.c., was killed while bombing and sinking a        japanese warship in august 1945, a few days before the        end of the second world war, and was the last canadian        to receive the v.c. to date.","the discovery of oil in alberta in 1947 began canadas modern energy industry.","in 1948 the last of these, the japanese- canadians, gained the right to vote.","in 1948 quebec adopted its own flag, based on the cross and the fleur-de-lys (see p.47).","it participated in the un operation defending south korea in the korean war (195053), with 500 dead and 1,000 wounded.","les automatistes of quebec were pioneers of modern abstract art in the 1950s, most notably jean-paul riopelle.","in 1951, for the first time, a majority of canadians were able to afford adequate food, shelter and clothing.","queen elizabeth ii, who has been queen of canada since 1952, marked her golden jubilee in 2002, and celebrated her diamond jubilee (60 years as sovereign) in 2012.","canada welcomed thousands of refugees from communist oppression, including about 37,000 who escaped soviet tyranny in hungary in 1956.","picture: (from left to right) queen elizabeth ii opening the 23rd parliament (1957).","this heritage of freedom i pledge to uphold for myself and all mankind. john diefenbaker      13th prime minister of canada      june 21, 1957april 22, 1963 these quotes do not need to be learned for the citizenship test.","quebec experienced an era of rapid change in the 1960s known as the quiet revolution.","aboriginal people were granted the vote in 1960.","by the 1960s, one- third of canadians had origins that were neither british nor french, and took pride in preserving their distinct culture in the canadian fabric.","in 1963 parliament established the royal commission on bilingualism and biculturalism.","canadian flag of 1965.","flags in canada a new canadian flag was raised for the first time in 1965.","after using british honours for many years, canada started its own honours system with the order of canada in 1967, the centennial of confederation.","this led to the official languages act (1969), which guarantees french and english services in the federal government across canada.","parliament passed the official languages act in 1969.","in the 1970s, the term first nations began to be used.","since the 1970s, most immigrants have come from asian countries.","in 1970, canada helped found la francophonie, an international association of french-speaking countries.","picture: (from left to right) donovan bailey, chantal petitclerc, terry fox, wayne gretzky picture: mark tewksbury, olympic gold medallist and prominent activist for gay and lesbian canadians picture: in 1972, paul henderson scored the winning goal for canada in the canada-soviet summit series.","picture: jazz pianist oscar peterson (left) receives the order of canada from roland michener (right), the 20th governor general, in 1973.","with the communist victory in the vietnam war in 1975, many vietnamese fled, including over 50,000 who sought refuge in canada.","picture: (left) montreal canadiens stanley cup champions, 1978                                 81","one of the greatest hockey players of all time, wayne gretzky, played for the edmonton oilers from 1979 to 1988.","the movement for quebec sovereignty gained strength but was defeated in a referendum in the province in 1980.","in 1980, terry fox, a british columbian who lost his right leg to cancer at the age of 18, began a cross-country run, the marathon of hope, to raise money for cancer research.","national anthem o canada was proclaimed as the national anthem in 1980.","the constitution of canada was amended in 1982 to entrench the canadian charter of rights and freedoms, which begins with the words, whereas canada is founded upon principles that recognize the supremacy of god and the rule of law.","picture: queen elizabeth ii proclaiming the amended constitution, ottawa, 1982                                  12","until 1982, july 1 was celebrated as dominion day to commemorate the day that canada became a self-governing dominion.","after much negotiation, in 1982 the constitution was amended without the agreement of quebec.","in 1985, fellow british columbian rick hansen circled the globe in a wheelchair to raise funds for spinal cord research.","memorable quotes for here [in canada], i want the marble to remain the marble; the granite to remain the granite; the oak to remain the oak; and out of these elements, i would build a nation great among the nations of the world. sir wilfrid laurier      7th prime minister of canada      july 11, 1986october 6, 1911 i am a canadian, a free canadian, free to speak without fear, free to worship in my own way, free to stand for what i think right, free to oppose what i believe wrong, or free to choose those who shall govern my country.","the government of canada apologized in 1988 for wartime wrongs and compensated the victims.","in 1988, canada enacted free trade with the united states.","since 1989, the canadian space agency and canadian astronauts have participated in space exploration, often using the canadian-designed and built canadarm.","mexico became a partner in 1994 in the broader north american free trade agreement (nafta), with over 444 million people and over $1 trillion in merchandise trade in 2008.","though sovereignty was again defeated in a second referendum in 1995, the autonomy of quebec within canada remains a lively topicpart of the dynamic that continues to shape our country.","in 1996 at the olympic summer games, donovan bailey became a world record sprinter and double olympic gold medallist chantal petitclerc became a world champion wheelchair racer and paralympic gold medallist.","nunavut nunavut, meaning our land in inuktitut, was established in 1999 from the eastern part of the northwest territories, including all of the former district of keewatin.","this goal is often referred to as the goal heard around the world and is still remembered today as an important event in both sports and cultural history picture: (from left to right) catriona le may doan carries the flag after winning a gold medal in speed skating at the 2002 olympic winter games.","picture: the canadian red ensign served as the national flag for 100 years, and has been carried officially by veterans since 2005 the maple leaf the maple leaf is canadas best-known symbol.","the clarkson cup, established in 2005 by adrienne clarkson, the 26th governor general (and the first of asian origin), is awarded for womens hockey.","recognized in 2006 that the quebecois form a nation within a united canada.","the government of canada apologized in 2006 for this discriminatory policy.","geography geography quizzes http://atlas.nrcan.gc.ca/site/english/ learningresources/quizzes/index.html for a greener canada sustainable development www.pc.gc.ca/docs/pc/strat/sdd-sds-2007/index_e.asp being energy efficient www.nrcan.gc.ca/eneene/effeff/index-eng.php getting involved volunteer canada www.volunteer.ca volunteer opportunities related to the environment www.ec.gc.ca/education/ default.asp?","in 2008, ottawa formally apologized to the former students.","picture: team canada won gold in mens hockey at the 2010 winter olympics in vancouver discover canada                            129"," her majesty the queen in right of canada, represented by the minister of citizenship and immigration canada, 2011 ci1-11/2012e-lp 978-1-100-20616-5                                 4","by telephone call centre number for all areas within canada, call 1-888-242-2100 (toll-free).","canada: a peoples history (canadian broadcasting corporation) canadas history (published by canadas national history society) kayak: canadas history magazine for kids (published by canadas national history society) federal programs and services you can obtain information about canada by telephone or on the internet: telephone: 1-800-o-canada (1 800 622-6232) (toll-free) 1-800-465-7735  tty (toll-free) internet: the government of canada website contains information about many government programs and services.","if you do not have the number, call elections canada, in ottawa, at 1- 800-463-6868."]},"columns":[{"accessor":"year","name":"Year","type":"numeric","maxWidth":250},{"accessor":"sentence","name":"What happened?","type":"character"}],"pivotBy":["year"],"resizable":true,"filterable":true,"searchable":true,"defaultPageSize":10,"showPageSizeOptions":true,"pageSizeOptions":[10,25,50,100],"paginationType":"numbers","showPageInfo":true,"minRows":1,"onClick":"expand","theme":{"backgroundColor":"#eadbcb"},"dataKey":"9f655dcc193fa4456cc32059bd4cc675","key":"9f655dcc193fa4456cc32059bd4cc675"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<p>I am now ready to delve into the Discover Canada study guide further. Ideally, I want to extract the most useful phrases from each sentence for a given year, but at this point I do not know the best way to do that programmatically. If you have any ideas, please share with me on <a href="https://twitter.com/umairdurrani87">twitter</a>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
